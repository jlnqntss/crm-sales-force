<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <description>Obtiene los call centers disponibles para el recordtype de ZDA</description>
        <name>AvailableCasePicklistValuesByRtAction</name>
        <label>Get available ZDA call centers</label>
        <locationX>1392</locationX>
        <locationY>242</locationY>
        <actionName>AvailableCasePicklistValuesByRtAction</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>CaseListToTextListLoop</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>fieldName</name>
            <value>
                <stringValue>CallCenter__c</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recordTypeId</name>
            <value>
                <elementReference>GetCaseAction.RecordTypeId</elementReference>
            </value>
        </inputParameters>
        <nameSegment>AvailableCasePicklistValuesByRtAction</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <actionCalls>
        <description>Envia una notificacion a la persona a la que se ha escalado el caso</description>
        <name>SendCustomNotificationAction</name>
        <label>Send custom notification</label>
        <locationX>490</locationX>
        <locationY>2654</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <connector>
            <targetReference>ScalingSucceededScreen</targetReference>
        </connector>
        <faultConnector>
            <targetReference>CreateRecordsSendNotificationErrorAction</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>GetCustomNotificationAction.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>NotificationRecipientsList</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Nuevo caso escalado</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <elementReference>BodyNotificationFormula</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>NewTaskId</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>60.0</apiVersion>
    <assignments>
        <description>Agrega el call center a la lista de texto de call centers</description>
        <name>AddCallCenterAssignment</name>
        <label>Add call center</label>
        <locationX>1480</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>CallCenterTextList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CaseListToTextListLoop.ActivityDescription__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CaseListToTextListLoop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AddContentDocumentLinkAssignment</name>
        <label>Add content document link</label>
        <locationX>490</locationX>
        <locationY>2030</locationY>
        <assignmentItems>
            <assignToReference>ContentDocumentLinkToCreate.ContentDocumentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CreateDocumentLinksLoop</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ContentDocumentLinkToCreate.LinkedEntityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>NewTaskId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ContentDocumentLinkToCreate.ShareType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>V</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ContentDocumentLinkToCreate.Visibility</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>AllUsers</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ContentDocumentLinkListToCreate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>ContentDocumentLinkToCreate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CreateDocumentLinksLoop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Agrega el identificador del supervisor a la lista de texto de identificadores de supervisor</description>
        <name>AddManagerIdAssignment</name>
        <label>Add manager id</label>
        <locationX>2250</locationX>
        <locationY>1490</locationY>
        <assignmentItems>
            <assignToReference>ManagerIdList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>UserListToManagerIdListLoop.Manager.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UserListToManagerIdListLoop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Se agrega la persona a la que se ha escalado el caso a la lista de personas a notificar</description>
        <name>AddOwnerIdToListAssignment</name>
        <label>Add owner id to list</label>
        <locationX>490</locationX>
        <locationY>2438</locationY>
        <assignmentItems>
            <assignToReference>NotificationRecipientsList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TaskOwnerIdVar</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>GetCustomNotificationAction</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Se setean los campos necesarios para crear la tarea y actualizar el caso para el caso del partner</description>
        <name>PartnerDataAssignment</name>
        <label>Partner data</label>
        <locationX>2558</locationX>
        <locationY>1166</locationY>
        <assignmentItems>
            <assignToReference>TaskOwnerIdVar</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SupervisorSelectionInput</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PendingByVar</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Partner</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Cerrada</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskOwnerIdVar</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>GetCaseAction.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>CreateTaskAction</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Asignacion de variables para el correcto funcionamiento del flujo</description>
        <name>ScalationWithoutPartnerDataAssignment</name>
        <label>Scalation without partner data</label>
        <locationX>1524</locationX>
        <locationY>866</locationY>
        <assignmentItems>
            <assignToReference>ScalationSelected</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SupportSupervisorInput</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CommentsSelected</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CommentsWithoutPartnerInput</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UploadedFileList</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AttachFilesWithoutPartnerInput.contentDocIds</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SupportPartnerSupervisorDecision</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Asignacion de variables para el correcto funcionamiento del flujo</description>
        <name>ScalationWithPartnerDataAssignment</name>
        <label>Scalation with partner data</label>
        <locationX>1260</locationX>
        <locationY>866</locationY>
        <assignmentItems>
            <assignToReference>ScalationSelected</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SupportSupervisorPartnerInput</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CommentsSelected</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CommentsWithPartnerInput</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>UploadedFileList</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AttachFilesWithPartnerInput.contentDocIds</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SupportPartnerSupervisorDecision</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Se setean los campos necesarios para crear la tarea y actualizar el caso para el caso del supervisor</description>
        <name>SupervisorDataAssignment</name>
        <label>Supervisor data</label>
        <locationX>2294</locationX>
        <locationY>2090</locationY>
        <assignmentItems>
            <assignToReference>TaskOwnerIdVar</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SupervisorSelectionInput</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PendingByVar</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Supervisor</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>CreateTaskAction</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Se setean los campos necesarios para crear la tarea y actualizar el caso para el caso de soporte</description>
        <name>SupportDataAssignment</name>
        <label>Support data</label>
        <locationX>402</locationX>
        <locationY>1598</locationY>
        <assignmentItems>
            <assignToReference>TaskOwnerIdVar</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AgentSelectionInput</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PendingByVar</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Support</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CreateTaskAction</targetReference>
        </connector>
    </assignments>
    <choices>
        <description>Seleccion de partner. El valor es el mismo que el del picklist Activity.Subtype__c para partner</description>
        <name>PartnerChoice</name>
        <choiceText>Partner</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Scaled partner</stringValue>
        </value>
    </choices>
    <choices>
        <description>Seleccion de supervisor. El valor es el mismo que el del picklist Activity.Subtype__c para supervisor</description>
        <name>SupervisorChoice</name>
        <choiceText>Supervisor</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Scaled Supervisor</stringValue>
        </value>
    </choices>
    <choices>
        <description>Seleccion de soporte. El valor es el mismo que el del picklist Activity.Subtype__c para soporte</description>
        <name>SupportChoice</name>
        <choiceText>Soporte</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Scaled support</stringValue>
        </value>
    </choices>
    <constants>
        <name>ZDA_INQUIRY_RT_DEVELOPER_NAME</name>
        <dataType>String</dataType>
        <value>
            <stringValue>ZDAInquiry</stringValue>
        </value>
    </constants>
    <decisions>
        <description>Se comprueba si existen supervisores definidos</description>
        <name>AreAvailableManagersDecision</name>
        <label>Are available managers</label>
        <locationX>2162</locationX>
        <locationY>1766</locationY>
        <defaultConnector>
            <targetReference>GetManagersInfoAction</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Yes</defaultConnectorLabel>
        <rules>
            <name>NoManagersAvailableOutcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ManagerIdList</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NoAvailableManagersScreen</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <description>Se decide la pantalla a mostrar en función de si hay usuarios disponibles para el equipo o no</description>
        <name>AreAvailableUsersDecision</name>
        <label>Are available users</label>
        <locationX>226</locationX>
        <locationY>1382</locationY>
        <defaultConnector>
            <targetReference>AgentSelectionScreen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Yes</defaultConnectorLabel>
        <rules>
            <name>NoAvailableUsersOutcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetTeamUsersAction</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NoAvailableAgentsScreen</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <description>Comprueba si el campo supervisor esta informado</description>
        <name>HasManagerDecision</name>
        <label>Has manager</label>
        <locationX>2382</locationX>
        <locationY>1382</locationY>
        <defaultConnector>
            <targetReference>UserListToManagerIdListLoop</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesHasManagerOutcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>UserListToManagerIdListLoop.Manager.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>AddManagerIdAssignment</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>En funcion de los datos que tenga informados el caso, se permitira el escalado a partner o no</description>
        <name>IsPartnerScalationAvailableDecision</name>
        <label>Is partner scalation available</label>
        <locationX>1392</locationX>
        <locationY>650</locationY>
        <defaultConnector>
            <targetReference>ScalationDataWithoutPartnerScreen</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesAvailablePartner</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>GetCaseAction.Origin</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>CanalUnico</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>GetCaseAction.TicketId__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>EscalationDataWithPartnerScreen</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>Se decide si se envia notificacion a la persona a la que se ha escalado. Si es partner no se debe crear, ya que la persona asignada a la tarea es el agente que ha realizado el escalado</description>
        <name>SendCustomNotificationDecision</name>
        <label>Send custom notification</label>
        <locationX>402</locationX>
        <locationY>2330</locationY>
        <defaultConnector>
            <targetReference>AddOwnerIdToListAssignment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Yes</defaultConnectorLabel>
        <rules>
            <name>NoSendCustomNotificationOutcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ScalationSelected</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>PartnerChoice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ScalingSucceededScreen</targetReference>
            </connector>
            <label>No</label>
        </rules>
    </decisions>
    <decisions>
        <description>En función del tipo de escalado seleccionado se ejecutarán unas acciones u otras</description>
        <name>SupportPartnerSupervisorDecision</name>
        <label>Support, Supervisor or Partner</label>
        <locationX>1392</locationX>
        <locationY>1058</locationY>
        <defaultConnector>
            <targetReference>PartnerDataAssignment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Partner</defaultConnectorLabel>
        <rules>
            <name>SupportOutcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ScalationSelected</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>SupportChoice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>TeamSelectionScreen</targetReference>
            </connector>
            <label>Support</label>
        </rules>
        <rules>
            <name>SupervisorOutcome</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ScalationSelected</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>SupervisorChoice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>GetManagersAction</targetReference>
            </connector>
            <label>Supervisor</label>
        </rules>
    </decisions>
    <description>Screen flow para el escalado de casos de ZDA</description>
    <dynamicChoiceSets>
        <description>Lista de seleccion que contiene los supervisores disponibles</description>
        <name>AvailableManagersCollectionChoiceSet</name>
        <collectionReference>GetManagersInfoAction</collectionReference>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <object>User</object>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <description>Contiene una lista de seleccion de usuarios pertenecientes al call center seleccionado</description>
        <name>AvailableUsersForCallCenter</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Department</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>TeamSelectionInput</elementReference>
            </value>
        </filters>
        <object>User</object>
        <sortField>Name</sortField>
        <sortOrder>Asc</sortOrder>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <description>Lista de seleccion de equipo. Se crea a partir de la lista de casos devuelta en el AvailablePicklistValuesByRtAction. Esta clase retorna cada call center disponible en el campo ActivityDescription__c porque el campo CallCenter, al ser de tipo picklist, no es posible utilizarlo en el choice set.</description>
        <name>AvailableZDACallCentersCollectionChoiceSet</name>
        <collectionReference>AvailableCasePicklistValuesByRtAction</collectionReference>
        <dataType>String</dataType>
        <displayField>ActivityDescription__c</displayField>
        <object>Case</object>
        <valueField>ActivityDescription__c</valueField>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <description>Formula para establecer el cuerpo de la notificación custom</description>
        <name>BodyNotificationFormula</name>
        <dataType>String</dataType>
        <expression>{!TaskBodyStart} + {!GetCaseAction.CaseNumber}</expression>
    </formulas>
    <interviewLabel>ZDA - Case escalation screen {!$Flow.CurrentDateTime}</interviewLabel>
    <label>ZDA - Case escalation screen</label>
    <loops>
        <description>En este bucle se convierte la lista de casos con los call centers en una lista de texto</description>
        <name>CaseListToTextListLoop</name>
        <label>Case list to text list</label>
        <locationX>1392</locationX>
        <locationY>350</locationY>
        <collectionReference>AvailableCasePicklistValuesByRtAction</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AddCallCenterAssignment</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>IsPartnerScalationAvailableDecision</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Crea el link entre los ficheros adjuntos y la tarea creada</description>
        <name>CreateDocumentLinksLoop</name>
        <label>Create document links loop</label>
        <locationX>402</locationX>
        <locationY>1922</locationY>
        <collectionReference>UploadedFileList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AddContentDocumentLinkAssignment</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>CreateContentDocumentLinksAction</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Convierte la lista de usuarios en una lista de identificadores de supervisor</description>
        <name>UserListToManagerIdListLoop</name>
        <label>User list to manager id list</label>
        <locationX>2162</locationX>
        <locationY>1274</locationY>
        <collectionReference>GetManagersAction</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>HasManagerDecision</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>AreAvailableManagersDecision</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <description>Crea la lista de content document links para asociar los adjuntos con la tarea creada</description>
        <name>CreateContentDocumentLinksAction</name>
        <label>Create content document links</label>
        <locationX>402</locationX>
        <locationY>2222</locationY>
        <connector>
            <targetReference>SendCustomNotificationDecision</targetReference>
        </connector>
        <inputReference>ContentDocumentLinkListToCreate</inputReference>
    </recordCreates>
    <recordCreates>
        <description>Crea un registro de log erroneo con el error producido al obtener la notificacion custom</description>
        <name>CreateRecordsGetNotificationErrorAction</name>
        <label>Create record get notification error</label>
        <locationX>1018</locationX>
        <locationY>2654</locationY>
        <connector>
            <targetReference>ErrorGetNotificationScreen</targetReference>
        </connector>
        <inputAssignments>
            <field>Message__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Source_Class__c</field>
            <value>
                <stringValue>ZDA Case Escalation Screen</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Source_Method__c</field>
            <value>
                <stringValue>Recuperar Notificación</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Throwing_Time__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>Error_Log__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <description>Crea un registro de log erroneo con el error producido al enviar la notificacion custom</description>
        <name>CreateRecordsSendNotificationErrorAction</name>
        <label>Create record send notification error</label>
        <locationX>754</locationX>
        <locationY>2762</locationY>
        <connector>
            <targetReference>ErrorSendNotificationScreen</targetReference>
        </connector>
        <inputAssignments>
            <field>Message__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Source_Class__c</field>
            <value>
                <stringValue>ZDA Case Escalation Screen</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Source_Method__c</field>
            <value>
                <stringValue>Enviar Notificación</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Throwing_Time__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>Error_Log__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <description>Crea una tarea para el usuario al que se escalará el caso</description>
        <name>CreateTaskAction</name>
        <label>Create task</label>
        <locationX>402</locationX>
        <locationY>1706</locationY>
        <assignRecordIdToReference>NewTaskId</assignRecordIdToReference>
        <connector>
            <targetReference>UpdateCase_pending_support</targetReference>
        </connector>
        <faultConnector>
            <targetReference>CreateTaskErrorAction</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Description</field>
            <value>
                <elementReference>CommentsSelected</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>TaskOwnerIdVar</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <elementReference>TaskStatus</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>Escalado de caso</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subtype__c</field>
            <value>
                <elementReference>ScalationSelected</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <stringValue>Scaled Case</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
    </recordCreates>
    <recordCreates>
        <description>Crea un registro de log erroneo con el error producido al crear la tarea</description>
        <name>CreateTaskErrorAction</name>
        <label>Create task error</label>
        <locationX>1546</locationX>
        <locationY>1814</locationY>
        <connector>
            <targetReference>TaskErrorScreen</targetReference>
        </connector>
        <inputAssignments>
            <field>Message__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Source_Class__c</field>
            <value>
                <stringValue>ZDA Case Escalation Screen</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Source_Method__c</field>
            <value>
                <stringValue>Crear tarea para el caso escalado</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Throwing_Time__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>Error_Log__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <description>Crea un registro de log erroneo con el error producido al actualizar el caso</description>
        <name>UpdateCaseErrorAction</name>
        <label>Update case error</label>
        <locationX>1282</locationX>
        <locationY>1922</locationY>
        <connector>
            <targetReference>CaseErrorScreen</targetReference>
        </connector>
        <inputAssignments>
            <field>Message__c</field>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Source_Class__c</field>
            <value>
                <stringValue>ZDA Case Escalation Screen</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Source_Method__c</field>
            <value>
                <stringValue>Actualizar el caso a pendiente</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Throwing_Time__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <object>Error_Log__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <description>Se obtiene de BDD el caso a escalar</description>
        <name>GetCaseAction</name>
        <label>Get scalation case</label>
        <locationX>1392</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AvailableCasePicklistValuesByRtAction</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Obtiene el identificador de la notificacion custom de escalado de caso</description>
        <name>GetCustomNotificationAction</name>
        <label>Get custom notification</label>
        <locationX>490</locationX>
        <locationY>2546</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SendCustomNotificationAction</targetReference>
        </connector>
        <faultConnector>
            <targetReference>CreateRecordsGetNotificationErrorAction</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>EscalationCaseNotificacion</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CustomNotificationType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Obtiene los responsables asociados a aquellos usuarios que pertenecen a los call centers de ZDA</description>
        <name>GetManagersAction</name>
        <label>Get managers</label>
        <locationX>2162</locationX>
        <locationY>1166</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>UserListToManagerIdListLoop</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Department</field>
            <operator>In</operator>
            <value>
                <elementReference>CallCenterTextList</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>User</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>ManagerId</queriedFields>
        <sortField>ManagerId</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Obtiene la informacion de los supervisores</description>
        <name>GetManagersInfoAction</name>
        <label>Get managers info</label>
        <locationX>2294</locationX>
        <locationY>1874</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>SupervisorSelectionScreen</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>ManagerIdList</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>User</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <sortField>Name</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>Busca a los usuarios cuyo departamento sea el seleccionado en la pantalla anterior</description>
        <name>GetTeamUsersAction</name>
        <label>Get team users</label>
        <locationX>226</locationX>
        <locationY>1274</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AreAvailableUsersDecision</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Department</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>TeamSelectionInput</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>User</object>
        <sortField>Name</sortField>
        <sortOrder>Asc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <description>Establece el estado del caso como pendiente de soporte</description>
        <name>UpdateCase_pending_support</name>
        <label>Set case pending support</label>
        <locationX>402</locationX>
        <locationY>1814</locationY>
        <connector>
            <targetReference>CreateDocumentLinksLoop</targetReference>
        </connector>
        <faultConnector>
            <targetReference>UpdateCaseErrorAction</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>PendingBy__c</field>
            <value>
                <elementReference>PendingByVar</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Pendiente</stringValue>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordUpdates>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <screens>
        <description>Pantalla para seleccionar al agente al que irá escalado el caso</description>
        <name>AgentSelectionScreen</name>
        <label>Agent selection screen</label>
        <locationX>402</locationX>
        <locationY>1490</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>SupportDataAssignment</targetReference>
        </connector>
        <fields>
            <name>AgentSelectionInput</name>
            <choiceReferences>AvailableUsersForCallCenter</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Agente</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Pantalla para visualizar el error producido al actualizar el caso</description>
        <name>CaseErrorScreen</name>
        <label>Case error screen</label>
        <locationX>1282</locationX>
        <locationY>2030</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>CaseErrorDisplay</name>
            <fieldText>&lt;p&gt;{!$Flow.FaultMessage}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Pantalla para visualizar el error producido al obtener la notificacion custom</description>
        <name>ErrorGetNotificationScreen</name>
        <label>Error get notification screen</label>
        <locationX>1018</locationX>
        <locationY>2762</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>GetCustomNotificationErrorDisplay</name>
            <fieldText>&lt;p&gt;{!$Flow.FaultMessage}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Pantalla para visualizar el error producido al enviar la notificacion custom</description>
        <name>ErrorSendNotificationScreen</name>
        <label>Error send notification screen</label>
        <locationX>754</locationX>
        <locationY>2870</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>SendCustomNotificationErrorDisplay</name>
            <fieldText>&lt;p&gt;{!$Flow.FaultMessage}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Selección del tipo de escalado e introducción de datos</description>
        <name>EscalationDataWithPartnerScreen</name>
        <label>Scalation data with partner</label>
        <locationX>1260</locationX>
        <locationY>758</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>ScalationWithPartnerDataAssignment</targetReference>
        </connector>
        <fields>
            <name>SupportSupervisorPartnerInput</name>
            <choiceReferences>SupportChoice</choiceReferences>
            <choiceReferences>PartnerChoice</choiceReferences>
            <choiceReferences>SupervisorChoice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Tipo de escalado</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>CommentsWithPartnerInput</name>
            <fieldText>Comentarios (máximo 1.000 caracteres)</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;El tamaño no puede exceder los 1.000 caracteres&lt;/p&gt;</errorMessage>
                <formulaExpression>LEN({!CommentsWithPartnerInput})&lt;1000</formulaExpression>
            </validationRule>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>SupportSupervisorPartnerInput</leftValueReference>
                    <operator>IsNull</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>AttachFilesWithPartnerInput</name>
            <extensionName>forceContent:fileUpload</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Adjuntar fichero/s</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>multiple</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>title</name>
                <value>
                    <stringValue>Si se desea adjuntar más de un archivo, se deben adjuntar todos al mismo tiempo</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>SupportSupervisorPartnerInput</leftValueReference>
                    <operator>IsNull</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>ShowFileNamesWIthPartnerDisplay</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;Ficheros adjuntos:&lt;/strong&gt; {!AttachFilesWithPartnerInput.fileNames}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>AttachFilesWithPartnerInput.fileNames</leftValueReference>
                    <operator>IsNull</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Pantalla para informar de que no hay agentes disponibles para el call center seleccionado</description>
        <name>NoAvailableAgentsScreen</name>
        <label>No available agents screen</label>
        <locationX>50</locationX>
        <locationY>1490</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>NoAgentsDisplay</name>
            <fieldText>&lt;p&gt;No hay agentes en el equipo &lt;strong&gt;{!TeamSelectionInput}&lt;/strong&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Pantalla para informar de que no hay supervisores disponibles</description>
        <name>NoAvailableManagersScreen</name>
        <label>No available managers screen</label>
        <locationX>2030</locationX>
        <locationY>1874</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>NoSupervisorsDisplay</name>
            <fieldText>&lt;p&gt;No se han encontrado usuarios con el supervisor definido&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>NoManagersAvailableOutcome</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Selección del tipo de escalado e introducción de datos</description>
        <name>ScalationDataWithoutPartnerScreen</name>
        <label>Scalation data without partner</label>
        <locationX>1524</locationX>
        <locationY>758</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>ScalationWithoutPartnerDataAssignment</targetReference>
        </connector>
        <fields>
            <name>SupportSupervisorInput</name>
            <choiceReferences>SupportChoice</choiceReferences>
            <choiceReferences>SupervisorChoice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Tipo de escalado</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>CommentsWithoutPartnerInput</name>
            <fieldText>Comentarios (máximo 1.000 caracteres)</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <isRequired>true</isRequired>
            <validationRule>
                <errorMessage>&lt;p&gt;El tamaño no puede exceder los 1.000 caracteres&lt;/p&gt;</errorMessage>
                <formulaExpression>LEN({!CommentsWithoutPartnerInput})&lt;1000</formulaExpression>
            </validationRule>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>SupportSupervisorInput</leftValueReference>
                    <operator>IsNull</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>AttachFilesWithoutPartnerInput</name>
            <extensionName>forceContent:fileUpload</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Adjuntar fichero/s</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>multiple</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>title</name>
                <value>
                    <stringValue>Si se desea adjuntar más de un archivo, se deben adjuntar todos al mismo tiempo</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>SupportSupervisorInput</leftValueReference>
                    <operator>IsNull</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>ShowFileNamesWIthoutPartnerDisplay</name>
            <fieldText>&lt;p&gt;&lt;strong&gt;Ficheros adjuntos: &lt;/strong&gt;{!AttachFilesWithoutPartnerInput.fileNames}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>AttachFilesWithoutPartnerInput.fileNames</leftValueReference>
                    <operator>IsNull</operator>
                    <rightValue>
                        <booleanValue>false</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Pantalla final del flujo</description>
        <name>ScalingSucceededScreen</name>
        <label>Scaling succeeded</label>
        <locationX>402</locationX>
        <locationY>3194</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>ScalingOKDisplay</name>
            <fieldText>&lt;p&gt;Escalado realizado correctamente&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Pantalla para seleccionar al supervisor al que escalar el caso</description>
        <name>SupervisorSelectionScreen</name>
        <label>Supervisor selection screen</label>
        <locationX>2294</locationX>
        <locationY>1982</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>SupervisorDataAssignment</targetReference>
        </connector>
        <fields>
            <name>SupervisorSelectionInput</name>
            <choiceReferences>AvailableManagersCollectionChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Supervisor</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Pantalla para visualizar el error producido al crear la tarea</description>
        <name>TaskErrorScreen</name>
        <label>Task error screen</label>
        <locationX>1546</locationX>
        <locationY>1922</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>TaskErrorDisplay</name>
            <fieldText>&lt;p&gt;{!$Flow.FaultMessage}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Pantalla para seleccionar al equipo al que irá escalado el caso</description>
        <name>TeamSelectionScreen</name>
        <label>Team selection screen</label>
        <locationX>226</locationX>
        <locationY>1166</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>GetTeamUsersAction</targetReference>
        </connector>
        <fields>
            <name>TeamSelectionInput</name>
            <choiceReferences>AvailableZDACallCentersCollectionChoiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Equipo</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>1266</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>GetCaseAction</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <description>Lista de call centers en formato texto</description>
        <name>CallCenterTextList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Comentarios introducidos por el agente para el escalado</description>
        <name>CommentsSelected</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Lista de elementos content document link a crear</description>
        <name>ContentDocumentLinkListToCreate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContentDocumentLink</objectType>
    </variables>
    <variables>
        <description>Elemento content document link a crear</description>
        <name>ContentDocumentLinkToCreate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContentDocumentLink</objectType>
    </variables>
    <variables>
        <description>Lista de identificadores de supervisores</description>
        <name>ManagerIdList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Identificador de la tarea creada</description>
        <name>NewTaskId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Lista que contendra los identificadores de las personas que recibiran la notificacion custom</description>
        <name>NotificationRecipientsList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Variable que contendrá el valor a asignar al campo pending by del caso</description>
        <name>PendingByVar</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Identificador del caso a escalar</description>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Tipo de escalado seleccionado</description>
        <name>ScalationSelected</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Parte inicial del cuerpo de la notificación custom</description>
        <name>TaskBodyStart</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Se le ha escalado el caso: </stringValue>
        </value>
    </variables>
    <variables>
        <description>Variable que contendrá el propietario de la tarea a crear</description>
        <name>TaskOwnerIdVar</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Estado de la tarea. Sera asignado excepto para Partner, que será Cerrada</description>
        <name>TaskStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Asignada</stringValue>
        </value>
    </variables>
    <variables>
        <description>Lista de content document id de los ficheros que el agente ha adjuntado</description>
        <name>UploadedFileList</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
