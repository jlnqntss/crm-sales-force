/**
 * Clase utils para la gesti√≥n de la custom metadata  RoutingTeamQueueConfig__mdt, cuyo objetivo es mapear las colas de casos
 * con el equipo de enrutamiento correspondiente
 * @author fjbelmonte
 * @date 24/10/2024
 */
public with sharing class RoutingTeamQueueConfigUtil {

    /**
     * Devuelve en forma de mapa todas las colas con su correspondiente equipo de enrutamiento 
     * @author fjbelmonte
     * @date 24/10/2024
     * @return  Mapa con los valores de la mdt
     */
    public static Map<String, String> getRoutingTeamQueueConfigValues() 
    {
        try {
            Map<String, String> mConfigValues = new Map<String, String>();
            if (Schema.getGlobalDescribe().get('RoutingTeamQueueConfig__mdt').getDescribe().isQueryable()) {
                // El objeto existe y se puede consultar
                for(RoutingTeamQueueConfig__mdt config : [SELECT Queue__c, RoutingTeam__c FROM RoutingTeamQueueConfig__mdt]){
                    mConfigValues.put(config.Queue__c, config.RoutingTeam__c);
                }
            }
            return mConfigValues;
        } catch (Exception ex) {
            ErrorLogUtil.commitError(ErrorLogUtil.ERROR_LEVEL_ERROR, ex.getMessage() + ' LineNumber: ' + ex.getLineNumber(), 'RoutingTeamQueueConfigUtil - getRoutingTeamQueueConfigValues');
            throw ex;
        }
    }
}